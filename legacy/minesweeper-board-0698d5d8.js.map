{"version":3,"file":"minesweeper-board-0698d5d8.js","sources":["../../src/memoize.js","../../src/square-machine.js","../../node_modules/lit-html/directive.js","../../node_modules/lit-html/directives/class-map.js","../../src/minesweeper-square.js","../../src/minesweeper-board.js"],"sourcesContent":["const valueSymbol = Symbol('value');\n\nexport function memoize(cb) {\n  const memos = new Map();\n  return (...args) => {\n    let memo = memos;\n    let i = 0;\n    const ct = args.length;\n    while (memo.has(args[i]) && i < ct - 1) {\n      memo = memo.get(args[i]);\n      i += 1;\n    }\n    if (i === ct - 1 && memo.has(valueSymbol)) {\n      memo = memo.get(valueSymbol);\n    } else {\n      while (i < ct) {\n        memo.set(args[i], new Map());\n        memo = memo.get(args[i]);\n        i += 1;\n      }\n      memo.set(valueSymbol, cb(...args));\n      memo = memo.get(valueSymbol);\n    }\n    return memo;\n  };\n}\n","export const squareMachine = {\n  initial: 'INIT',\n  states: {\n    INIT: {\n      on: {\n        MINE: 'MINE',\n        NOT_MINE: 'NOT_MINE',\n      },\n    },\n    NOT_MINE: {\n      on: {\n        MARKED: 'MARKED',\n        PLAYED: 'PLAYED',\n      },\n    },\n    MINE: {\n      on: {\n        MARKED: 'MARKED_MINE',\n        PLAYED: 'TRIPPED',\n      },\n    },\n    MARKED: {\n      on: {\n        UNMARKED: 'NOT_MINE',\n      },\n    },\n    PLAYED: {\n      on: {},\n    },\n    MARKED_MINE: {\n      on: {\n        UNMARKED: 'MINE',\n      },\n    },\n    TRIPPED: {\n      on: {},\n    },\n  },\n};\n\nexport const squareTransition = (state, event) => {\n  if (!state) return squareMachine.initial;\n  return squareMachine.states[state].on[event] || state;\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},i=t=>(...i)=>({_$litDirective$:t,values:i});class s{constructor(t){}T(t,i,s){this.Σdt=t,this.M=i,this.Σct=s}S(t,i){return this.update(t,i)}update(t,i){return this.render(...i)}}export{s as Directive,t as PartType,i as directive};\n//# sourceMappingURL=directive.js.map\n","import{noChange as t}from\"../lit-html.js\";import{directive as s,Directive as r,PartType as i}from\"../directive.js\";\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const e=s(class extends r{constructor(t){var s;if(super(t),t.type!==i.ATTRIBUTE||\"class\"!==t.name||(null===(s=t.strings)||void 0===s?void 0:s.length)>2)throw Error(\"`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.\")}render(t){return Object.keys(t).filter((s=>t[s])).join(\" \")}update(s,[r]){if(void 0===this.bt){this.bt=new Set;for(const t in r)r[t]&&this.bt.add(t);return this.render(r)}const i=s.element.classList;this.bt.forEach((t=>{t in r||(i.remove(t),this.bt.delete(t))}));for(const t in r){const s=!!r[t];s!==this.bt.has(t)&&(s?(i.add(t),this.bt.add(t)):(i.remove(t),this.bt.delete(t)))}return t}});export{e as classMap};\n//# sourceMappingURL=class-map.js.map\n","import { LitElement, html, css } from 'lit';\nimport { classMap } from 'lit/directives/class-map.js';\n\nclass MinesweeperSquare extends LitElement {\n  static get properties() {\n    return {\n      canFocus: { type: Boolean, attribute: 'can-focus' },\n      neighbors: { type: Number },\n      state: { type: String },\n      column: { type: Number },\n      row: { type: Number },\n    };\n  }\n\n  constructor() {\n    super();\n    this.state = 'INIT';\n    this.neighbors = 0;\n    this.column = 0;\n    this.row = 0;\n  }\n\n  _dangerLevel() {\n    switch (this.state) {\n      case 'MARKED':\n      case 'MARKED_MINE':\n        return 'm';\n      case 'TRIPPED':\n        return 'x';\n      case 'PLAYED':\n        return this.neighbors || '';\n      case 'MINE':\n      case 'NOT_MINE':\n      default:\n        return '';\n    }\n  }\n\n  play() {\n    if (['MARKED', 'MARKED_MINE'].includes(this.state)) return;\n    this.dispatchEvent(new CustomEvent('minesweeper-played'));\n  }\n\n  mark(e) {\n    e.preventDefault();\n    if (this.state === 'PLAYED') {\n      this.play();\n      return;\n    }\n    this.dispatchEvent(\n      new CustomEvent('minesweeper-marked', {\n        detail: {\n          marked: ['MARKED', 'MARKED_MINE'].includes(this.state),\n        },\n      }),\n    );\n  }\n\n  focus() {\n    this.shadowRoot.querySelector('button').focus();\n  }\n\n  static get styles() {\n    return [\n      css`\n        :host {\n          display: flex;\n          line-height: var(--minesweeper-square-size, 25px);\n          text-align: center;\n        }\n        .square {\n          cursor: pointer;\n          box-sizing: border-box;\n          width: 100%;\n          height: 100%;\n          border: 4px outset;\n          background: var(--color-square-background, #cecece);\n          font-weight: bold;\n          font-family: monospace;\n          font-size: 2em;\n          -webkit-user-select: none; /* Chrome all / Safari all */\n          -moz-user-select: none; /* Firefox all */\n          -ms-user-select: none; /* IE 10+ */\n          user-select: none; /* Likely future */\n        }\n        .square:focus {\n          transform: translateZ(0);\n          outline: 2px solid var(--color-square-focus, blue);\n          outline-offset: -10px;\n        }\n        .played {\n          border: 1px solid var(--color-square-border, #999);\n        }\n        .played:focus {\n          outline-offset: -5px;\n        }\n        .low {\n          color: var(--color-danger-low, blue);\n        }\n        .medium {\n          color: var(--color-danger-medium, green);\n        }\n        .high {\n          color: var(--color-danger-high, red);\n        }\n        .worry {\n          color: var(--color-danger-worry, darkred);\n        }\n        .dead {\n          background: var(--color-dead, red);\n        }\n      `,\n    ];\n  }\n\n  testDangerLevel(dangerLevel, threashold = -1) {\n    return this.state === 'PLAYED' && dangerLevel > threashold;\n  }\n\n  get squareType() {\n    switch (this.state) {\n      case 'PLAYED':\n        return 'Played';\n      case 'MARKED':\n      case 'MARKED_MINE':\n        return 'Marked';\n      default:\n        return 'Playable';\n    }\n  }\n\n  render() {\n    const dangerLevel = this._dangerLevel();\n    return html`\n      <button\n        class=${classMap({\n          square: true,\n          played: ['PLAYED', 'TRIPPED'].includes(this.state),\n          low: this.testDangerLevel(dangerLevel),\n          medium: this.testDangerLevel(dangerLevel, 1),\n          high: this.testDangerLevel(dangerLevel, 2),\n          worry: this.testDangerLevel(dangerLevel, 5),\n          dead: this.state === 'TRIPPED',\n        })}\n        tabindex=${this.canFocus ? '0' : '-1'}\n        @click=${this.play}\n        @contextmenu=${this.mark}\n        aria-label=${`${this.squareType} Square: Column ${this.column + 1}, Row ${this.column + 1}`}\n      >\n        ${dangerLevel}\n      </button>\n    `;\n  }\n}\n\ncustomElements.define('minesweeper-square', MinesweeperSquare);\n","import { LitElement, html, css } from 'lit';\n\nimport { memoize } from './memoize.js';\nimport { squareTransition } from './square-machine.js';\nimport { defaultBoard } from './constants.js';\nimport './minesweeper-square.js';\n\nconst status = {\n  DEAD: 'dead',\n  PLAYING: 'playing',\n};\n\nconst defaultFocusedSquare = [0, 0];\n\nclass MinesweeperBoard extends LitElement {\n  static get properties() {\n    return {\n      moves: { type: Number },\n      board: { type: Array },\n      marks: { type: Number },\n      mines: { type: Number },\n      status: { type: String },\n      focusedSquare: { type: Array },\n    };\n  }\n\n  constructor() {\n    super();\n    this.board = defaultBoard;\n    this.moves = 0;\n    this.marks = 0;\n    this.mines = 0;\n    this.status = status.PLAYING;\n    this.focusedSquare = defaultFocusedSquare;\n    this.handleKeydown = this.handleKeydown.bind(this);\n  }\n\n  get board() {\n    return this._board;\n  }\n\n  set board(board) {\n    if (board === this.board) return;\n    const old = this.board;\n    this._board = board;\n    this.memoizedGetNeighboringMines = memoize(this._getNeighboringMines.bind(this));\n    this.requestUpdate('board', old);\n  }\n\n  _getNeighbors(across, down, ...needles) {\n    let neighbors = 0;\n    this._doNeighbors(across, down, (square) => {\n      if (needles.includes(square.state)) {\n        neighbors += 1;\n      }\n    });\n    return neighbors;\n  }\n\n  _doNeighbors(across, down, cb) {\n    const neighbors = 0;\n    for (let i = -1; i <= 1; i += 1) {\n      if (this.board[across + i]) {\n        for (let j = -1; j <= 1; j += 1) {\n          const square = this.board[across + i][down + j];\n          if (square && (i !== 0 || j !== 0)) {\n            cb(square, i, j);\n          }\n        }\n      }\n    }\n    return neighbors;\n  }\n\n  _getNeighboringMines(...args) {\n    return this._getNeighbors(...args, 'MINE', 'MARKED_MINE', 'TRIPPED');\n  }\n\n  _getNeighboringMarks(...args) {\n    return this._getNeighbors(...args, 'MARKED', 'MARKED_MINE');\n  }\n\n  _playNeighbors(across, down, unsafe) {\n    this._doNeighbors(across, down, (square, i, j) => {\n      if (unsafe || square.state === 'NOT_MINE') {\n        square.state = squareTransition(square.state, 'PLAYED');\n        if (square.state === 'TRIPPED') {\n          this.status = status.DEAD;\n        } else if (\n          !['MARKED', 'MARKED_MINE'].includes(square.state) &&\n          this.memoizedGetNeighboringMines(across + i, down + j) === 0\n        ) {\n          this._playNeighbors(across + i, down + j);\n        }\n      }\n    });\n    this.moves += 1;\n  }\n\n  _played(e) {\n    if (this.status === status.DEAD) return;\n    const { column, row } = e.target;\n    const square = this.board[column][row];\n    this.focusedSquare = [column, row];\n    if (square.state === 'PLAYED') {\n      const unsafe = true;\n      if (\n        this.memoizedGetNeighboringMines(column, row) === this._getNeighboringMarks(column, row)\n      ) {\n        this._playNeighbors(column, row, unsafe);\n      } else {\n        return;\n      }\n    } else if (square.state === 'MINE') {\n      this.status = status.DEAD;\n    } else if (!this.memoizedGetNeighboringMines(column, row)) {\n      this._playNeighbors(column, row);\n    }\n    square.state = squareTransition(square.state, 'PLAYED');\n    this.moves += 1;\n  }\n\n  _marked(e) {\n    const { column, row } = e.target;\n    const square = this.board[column][row];\n    this.focusedSquare = [column, row];\n    square.state = squareTransition(square.state, e.detail.marked ? 'UNMARKED' : 'MARKED');\n    this.marks += square.state === 'MARKED' || square.state === 'MARKED_MINE' ? 1 : -1;\n    this.moves += 1;\n  }\n\n  handleKeydown(e) {\n    let { column, row } = e.composedPath()[0].getRootNode().host;\n    const offset = e.shiftKey ? 5 : 1;\n    switch (e.key) {\n      case 'ArrowDown':\n        row = this.board[0].length + row + offset;\n        break;\n      case 'ArrowUp':\n        row = this.board[0].length + row - offset;\n        break;\n      case 'ArrowLeft':\n        column = this.board.length + column - offset;\n        break;\n      case 'ArrowRight':\n        column = this.board.length + column + offset;\n        break;\n      case 'm':\n        this.shadowRoot.querySelector(`[column=\"${column}\"][row=\"${row}\"]`).mark(e);\n        break;\n      default:\n        break;\n    }\n    this.focusedSquare = [column % this.board.length, row % this.board[0].length];\n  }\n\n  focusBoard() {\n    window.addEventListener('keydown', this.handleKeydown);\n  }\n\n  blurBoard() {\n    window.removeEventListener('keydown', this.handleKeydown);\n  }\n\n  isFocusedSquare(across, down) {\n    if (this.focusedSquare === defaultFocusedSquare) {\n      return across === 0 && down === 0;\n    }\n    return across === this.focusedSquare[0] && down === this.focusedSquare[1];\n  }\n\n  get focusedSquareSelector() {\n    const [column, row] = this.focusedSquare;\n    return `[column=\"${column}\"][row=\"${row}\"]`;\n  }\n\n  static get styles() {\n    return [\n      css`\n        :host {\n          position: relative;\n          display: grid;\n          flex-grow: 1;\n          grid-auto-flow: column;\n          grid-template-columns: repeat(var(--columns), 1fr);\n          grid-template-rows: repeat(var(--rows), 1fr);\n        }\n        .status {\n          position: absolute;\n          bottom: 100%;\n          right: 0;\n          line-height: 48px;\n        }\n      `,\n    ];\n  }\n\n  render() {\n    return html`\n      <div class=\"status\">\n        ${this.marks}/${this.mines}\n      </div>\n      ${this.board.map((column, across) =>\n        column.map(\n          (square, down) => html`\n            <minesweeper-square\n              .state=${square.state}\n              .neighbors=${this.memoizedGetNeighboringMines(across, down)}\n              column=${across}\n              row=${down}\n              ?can-focus=${this.isFocusedSquare(across, down)}\n              @minesweeper-played=${this._played}\n              @minesweeper-marked=${this._marked}\n              @focus=${this.focusBoard}\n              @blur=${this.blurBoard}\n            ></minesweeper-square>\n          `,\n        ),\n      )}\n    `;\n  }\n\n  updated(changes) {\n    if (changes.has('status') && this.status === status.DEAD) {\n      this.dispatchEvent(\n        new CustomEvent('minesweeper-game-over', { bubbles: true, composed: true }),\n      );\n    } else if (changes.has('mines')) {\n      this.marks = 0;\n      this.status = status.PLAYING;\n      this.focusedSquare = defaultFocusedSquare;\n    } else {\n      const square = this.shadowRoot.querySelector(this.focusedSquareSelector);\n      square.updateComplete.then(() => {\n        square.focus();\n      });\n    }\n  }\n}\n\ncustomElements.define('minesweeper-board', MinesweeperBoard);\n"],"names":["valueSymbol","Symbol","squareMachine","initial","states","INIT","on","MINE","NOT_MINE","MARKED","PLAYED","UNMARKED","MARKED_MINE","TRIPPED","squareTransition","state","event","PartType","ATTRIBUTE","CHILD","PROPERTY","BOOLEAN_ATTRIBUTE","EVENT","ELEMENT","Directive","_partInfo","[object Object]","part","parent","attributeIndex","__part","this","_$parent","__attributeIndex","props","update","_part","render","classMap","c","values","_$litDirective$","directive","partInfo","super","type","name","strings","length","Error","classInfo","Object","keys","filter","key","join","_previousClasses","Set","add","classList","element","forEach","remove","delete","value","has","noChange","MinesweeperSquare","LitElement","neighbors","column","row","includes","dispatchEvent","CustomEvent","e","preventDefault","detail","marked","play","shadowRoot","querySelector","focus","dangerLevel","threashold","_dangerLevel","html","square","played","low","testDangerLevel","medium","high","worry","dead","canFocus","mark","squareType","Boolean","attribute","Number","String","css","customElements","define","status","DEAD","PLAYING","defaultFocusedSquare","MinesweeperBoard","board","defaultBoard","moves","marks","mines","focusedSquare","handleKeydown","_this","bind","_board","cb","memos","old","memoizedGetNeighboringMines","_getNeighboringMines","Map","memo","i","args","ct","get","set","requestUpdate","across","down","needles","_doNeighbors","j","_getNeighbors","unsafe","_this2","_playNeighbors","target","_getNeighboringMarks","composedPath","getRootNode","host","offset","shiftKey","window","addEventListener","removeEventListener","map","_this3","isFocusedSquare","_played","_marked","focusBoard","blurBoard","changes","bubbles","composed","focusedSquareSelector","updateComplete","then","Array"],"mappings":"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"}